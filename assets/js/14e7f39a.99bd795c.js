"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[6711],{28453(e,n,i){i.d(n,{R:()=>o,x:()=>d});var s=i(96540);const l={},r=s.createContext(l);function o(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),s.createElement(r.Provider,{value:n},e.children)}},75629(e,n,i){i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"shopifyBot/commands/link-customer","title":"Link Customer (Staff)","description":"The /link-customer command allows staff members to manually link a Discord user to a Shopify customer account. This command requires Manage Roles permissions and is only accessible to staff members.","source":"@site/docs/shopifyBot/commands/link-customer.md","sourceDirName":"shopifyBot/commands","slug":"/shopifyBot/commands/link-customer","permalink":"/shopifyBot/commands/link-customer","draft":false,"unlisted":false,"editUrl":"https://github.com/Shadow-Develops/docusaurus/tree/main/docs/shopifyBot/commands/link-customer.md","tags":[],"version":"current","lastUpdatedAt":1767418384000,"sidebarPosition":4,"frontMatter":{"sidebar_position":4,"pagination_next":null,"pagination_prev":null},"sidebar":"shopifyBot"}');var l=i(74848),r=i(28453);const o={sidebar_position:4,pagination_next:null,pagination_prev:null},d="Link Customer (Staff)",t={},c=[{value:"Overview",id:"overview",level:2},{value:"How to Use",id:"how-to-use",level:2},{value:"The Linking Process",id:"the-linking-process",level:2},{value:"Step 1: Validate Email",id:"step-1-validate-email",level:3},{value:"Step 2: Search Shopify",id:"step-2-search-shopify",level:3},{value:"Step 3: Link Accounts",id:"step-3-link-accounts",level:3},{value:"Step 4: Role Assignment",id:"step-4-role-assignment",level:3},{value:"Step 5: Confirmation",id:"step-5-confirmation",level:3},{value:"Response Examples",id:"response-examples",level:2},{value:"Success",id:"success",level:3},{value:"Email Not Found",id:"email-not-found",level:3},{value:"Invalid Email Format",id:"invalid-email-format",level:3},{value:"Logging and Auditing",id:"logging-and-auditing",level:2},{value:"Database Log",id:"database-log",level:3},{value:"Channel Log",id:"channel-log",level:3},{value:"Shopify Metafields",id:"shopify-metafields",level:2},{value:"Privacy and PII",id:"privacy-and-pii",level:2},{value:"PII Protection",id:"pii-protection",level:3},{value:"Best Practices",id:"best-practices",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"&quot;Invalid email address format&quot;",id:"invalid-email-address-format",level:3},{value:"&quot;No customer found with that email address&quot;",id:"no-customer-found-with-that-email-address",level:3},{value:"&quot;Failed to link customer&quot;",id:"failed-to-link-customer",level:3},{value:"User Already Linked",id:"user-already-linked",level:3},{value:"Related Commands",id:"related-commands",level:2},{value:"Permissions Required",id:"permissions-required",level:2},{value:"Tips for Staff",id:"tips-for-staff",level:2},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Customer Support Scenario",id:"customer-support-scenario",level:3},{value:"Bulk Onboarding",id:"bulk-onboarding",level:3},{value:"Troubleshooting",id:"troubleshooting-1",level:3}];function a(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"link-customer-staff",children:"Link Customer (Staff)"})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"/link-customer"})," command allows staff members to manually link a Discord user to a Shopify customer account. This command requires ",(0,l.jsx)(n.strong,{children:"Manage Roles"})," permissions and is only accessible to staff members."]}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["This is the administrative version of the ",(0,l.jsx)(n.code,{children:"/link"})," command. Use it when:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A customer needs help linking their account"}),"\n",(0,l.jsx)(n.li,{children:"The automated linking process fails"}),"\n",(0,l.jsx)(n.li,{children:"You need to link accounts on behalf of users"}),"\n",(0,l.jsx)(n.li,{children:"Troubleshooting linking issues"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"how-to-use",children:"How to Use"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Command:"})," ",(0,l.jsx)(n.code,{children:"/link-customer"})]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Required Options:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"user"})," - The Discord user to link (mention or select)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"email"})," - The customer's email address from Shopify"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Example:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"/link-customer user: @JohnDoe email: john@example.com\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"the-linking-process",children:"The Linking Process"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-validate-email",children:"Step 1: Validate Email"}),"\n",(0,l.jsx)(n.p,{children:"The bot checks:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Email format is valid"}),"\n",(0,l.jsx)(n.li,{children:"Email exists in your Shopify store"}),"\n",(0,l.jsx)(n.li,{children:"A customer account is associated with that email"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-2-search-shopify",children:"Step 2: Search Shopify"}),"\n",(0,l.jsx)(n.p,{children:"The command searches your Shopify customer database for an exact email match."}),"\n",(0,l.jsx)(n.h3,{id:"step-3-link-accounts",children:"Step 3: Link Accounts"}),"\n",(0,l.jsx)(n.p,{children:"Once found, the bot:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Links the Discord user ID to the Shopify customer ID"}),"\n",(0,l.jsx)(n.li,{children:"Stores the customer's email address"}),"\n",(0,l.jsx)(n.li,{children:"Records the link timestamp"}),"\n",(0,l.jsx)(n.li,{children:"Saves Discord information to Shopify metafields (if possible)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-4-role-assignment",children:"Step 4: Role Assignment"}),"\n",(0,l.jsx)(n.p,{children:"If configured in settings:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Automatically assigns the ",(0,l.jsx)(n.strong,{children:"client role"})," to the user"]}),"\n",(0,l.jsx)(n.li,{children:"Only if the customer has at least one order"}),"\n",(0,l.jsxs)(n.li,{children:["Only if ",(0,l.jsx)(n.strong,{children:"auto-assign on join"})," is enabled"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-5-confirmation",children:"Step 5: Confirmation"}),"\n",(0,l.jsx)(n.p,{children:"You receive a detailed confirmation embed showing:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Discord username"}),"\n",(0,l.jsx)(n.li,{children:"Shopify customer name"}),"\n",(0,l.jsx)(n.li,{children:"Email address (redacted if PII protection is enabled)"}),"\n",(0,l.jsx)(n.li,{children:"Total orders"}),"\n",(0,l.jsx)(n.li,{children:"Total amount spent"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"response-examples",children:"Response Examples"}),"\n",(0,l.jsx)(n.h3,{id:"success",children:"Success"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u2705 Customer Linked\r\n\r\nDiscord User: JohnDoe#1234\r\nShopify Customer: John Doe\r\nEmail: john@example.com (or ||REDACTED||)\r\nTotal Orders: 15\r\nTotal Spent: $1,245.50\n"})}),"\n",(0,l.jsx)(n.h3,{id:"email-not-found",children:"Email Not Found"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u274c Error\r\nNo customer found with that email address.\n"})}),"\n",(0,l.jsx)(n.h3,{id:"invalid-email-format",children:"Invalid Email Format"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u274c Error\r\nInvalid email address format.\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"logging-and-auditing",children:"Logging and Auditing"}),"\n",(0,l.jsx)(n.p,{children:"When a customer is linked:"}),"\n",(0,l.jsx)(n.h3,{id:"database-log",children:"Database Log"}),"\n",(0,l.jsx)(n.p,{children:"A log entry is created with:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Type: ",(0,l.jsx)(n.code,{children:"customer_link"})]}),"\n",(0,l.jsxs)(n.li,{children:["Action: ",(0,l.jsx)(n.code,{children:"link"})]}),"\n",(0,l.jsx)(n.li,{children:"Staff member who performed the action"}),"\n",(0,l.jsx)(n.li,{children:"Target user (Discord ID)"}),"\n",(0,l.jsx)(n.li,{children:"Shopify customer ID"}),"\n",(0,l.jsx)(n.li,{children:"Email address"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"channel-log",children:"Channel Log"}),"\n",(0,l.jsxs)(n.p,{children:["If configured, a message is sent to the ",(0,l.jsx)(n.strong,{children:"Shopify Commands"})," log channel:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\ud83d\udd17 Customer Linked\r\n\r\n@StaffMember linked @JohnDoe to Shopify customer\r\n\r\nCustomer ID: 1234567890\r\nEmail: john@example.com\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"shopify-metafields",children:"Shopify Metafields"}),"\n",(0,l.jsx)(n.p,{children:"The bot attempts to save Discord information to the Shopify customer record as metafields:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Discord User ID"}),"\n",(0,l.jsx)(n.li,{children:"Discord Username"}),"\n",(0,l.jsx)(n.li,{children:"Discord Server ID"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"This allows you to see Discord information directly in your Shopify admin panel."}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"If metafield saving fails, the linking process will still complete successfully. Metafields are optional and used for convenience only."})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"privacy-and-pii",children:"Privacy and PII"}),"\n",(0,l.jsx)(n.h3,{id:"pii-protection",children:"PII Protection"}),"\n",(0,l.jsxs)(n.p,{children:["If ",(0,l.jsx)(n.strong,{children:"Show PII"})," is disabled in settings:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Email addresses appear as ",(0,l.jsx)(n.code,{children:"||REDACTED||"})," in your response"]}),"\n",(0,l.jsx)(n.li,{children:"Full details are still logged in the log channel"}),"\n",(0,l.jsx)(n.li,{children:"This protects customer privacy in public channels"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Always verify you have the correct user before linking"}),"\n",(0,l.jsx)(n.li,{children:"Use private/staff channels when running this command"}),"\n",(0,l.jsx)(n.li,{children:"Keep customer email addresses confidential"}),"\n",(0,l.jsx)(n.li,{children:"Enable PII protection if using in semi-public channels"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"invalid-email-address-format",children:'"Invalid email address format"'}),"\n",(0,l.jsx)(n.p,{children:"Make sure the email:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Contains an ",(0,l.jsx)(n.code,{children:"@"})," symbol"]}),"\n",(0,l.jsx)(n.li,{children:"Has a valid domain"}),"\n",(0,l.jsx)(n.li,{children:"Has no extra spaces or typos"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"no-customer-found-with-that-email-address",children:'"No customer found with that email address"'}),"\n",(0,l.jsx)(n.p,{children:"Verify that:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The email is spelled correctly"}),"\n",(0,l.jsx)(n.li,{children:"The customer has an account in your Shopify store"}),"\n",(0,l.jsx)(n.li,{children:"You're using the exact email from Shopify (check in admin panel)"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"failed-to-link-customer",children:'"Failed to link customer"'}),"\n",(0,l.jsx)(n.p,{children:"This could happen if:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The Shopify API is unavailable"}),"\n",(0,l.jsx)(n.li,{children:"The bot lacks necessary permissions"}),"\n",(0,l.jsx)(n.li,{children:"There's a database connection issue"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Check the bot's console logs for detailed error information."}),"\n",(0,l.jsx)(n.h3,{id:"user-already-linked",children:"User Already Linked"}),"\n",(0,l.jsx)(n.p,{children:"If the Discord user is already linked to a different customer:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"/unlink-customer"})," first"]}),"\n",(0,l.jsxs)(n.li,{children:["Then run ",(0,l.jsx)(n.code,{children:"/link-customer"})," again"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"related-commands",children:"Related Commands"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/link"})," - User-initiated linking process"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/unlink-customer"})," - Manually unlink a customer (staff only)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/customer"})," - View customer information"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/settings"})," - Configure client role and auto-assign behavior"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"permissions-required",children:"Permissions Required"}),"\n",(0,l.jsx)(n.p,{children:"To use this command, you need:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Manage Roles"})," permission (Discord)"]}),"\n",(0,l.jsxs)(n.li,{children:["A ",(0,l.jsx)(n.strong,{children:"staff role"})," configured in bot settings"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"tips-for-staff",children:"Tips for Staff"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Double-check the email before linking to avoid mistakes"}),"\n",(0,l.jsx)(n.li,{children:"Verify with the user that the email is correct"}),"\n",(0,l.jsxs)(n.li,{children:["Use this command when users have trouble with ",(0,l.jsx)(n.code,{children:"/link"})]}),"\n",(0,l.jsx)(n.li,{children:"Keep a log channel configured for accountability"}),"\n",(0,l.jsx)(n.li,{children:"Link customers proactively during onboarding if needed"}),"\n",(0,l.jsx)(n.li,{children:"Always respect customer privacy when handling email addresses"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,l.jsx)(n.h3,{id:"customer-support-scenario",children:"Customer Support Scenario"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:'Customer: "I tried /link but the verification link isn\'t working"\r\nStaff: *Asks for their email*\r\nStaff: /link-customer user: @Customer email: their@email.com\r\nStaff: "All set! You\'re now linked and should have your customer role."\n'})}),"\n",(0,l.jsx)(n.h3,{id:"bulk-onboarding",children:"Bulk Onboarding"}),"\n",(0,l.jsx)(n.p,{children:"For existing customers joining your Discord:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Ask them to provide their Shopify email"}),"\n",(0,l.jsxs)(n.li,{children:["Use ",(0,l.jsx)(n.code,{children:"/link-customer"})," to link each account"]}),"\n",(0,l.jsx)(n.li,{children:"They automatically receive the customer role"}),"\n",(0,l.jsx)(n.li,{children:"They can immediately access customer-only channels"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"troubleshooting-1",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.p,{children:"When automated linking fails:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Ask the user to try ",(0,l.jsx)(n.code,{children:"/unlink"})," first"]}),"\n",(0,l.jsxs)(n.li,{children:["Have them try ",(0,l.jsx)(n.code,{children:"/link"})," again"]}),"\n",(0,l.jsxs)(n.li,{children:["If still failing, manually link with ",(0,l.jsx)(n.code,{children:"/link-customer"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);