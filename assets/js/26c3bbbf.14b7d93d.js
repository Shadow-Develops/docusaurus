"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[9361],{154(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"shadowStore/install/files","title":"Files & Nginx","description":"Now it is time to actually install the files, database, and setup Nginx! Please ensure you have completed the steps within Getting Started first!","source":"@site/docs/shadowStore/install/files.md","sourceDirName":"shadowStore/install","slug":"/shadowStore/install/files","permalink":"/shadowStore/install/files","draft":false,"unlisted":false,"editUrl":"https://github.com/Shadow-Develops/docusaurus/tree/main/docs/shadowStore/install/files.md","tags":[],"version":"current","lastUpdatedAt":1766886703000,"sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"shadowStore","previous":{"title":"Getting Started","permalink":"/shadowStore/install/getting-started"},"next":{"title":"Configuration","permalink":"/shadowStore/install/config"}}');var i=t(4848),r=t(8453);const a={sidebar_position:3},o="Files & Nginx",l={},d=[{value:"Files",id:"files",level:2},{value:"Nginx Configuration",id:"nginx-configuration",level:2},{value:"Issue SSL Certificate",id:"issue-ssl-certificate",level:3},{value:"Database",id:"database",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"files--nginx",children:"Files & Nginx"})}),"\n",(0,i.jsxs)(n.p,{children:["Now it is time to actually install the files, database, and setup Nginx! Please ensure you have completed the steps within ",(0,i.jsx)(n.a,{href:"/shadowStore/install/getting-started",children:"Getting Started"})," first!"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["We will be using ",(0,i.jsx)(n.a,{href:"https://winscp.net/eng/index.php",children:"WinSCP"})," to all file viewing, editing, and transferring. You may use another SFTP viewer if you prefer."]})}),"\n",(0,i.jsx)(n.h2,{id:"files",children:"Files"}),"\n",(0,i.jsx)(n.p,{children:"This is likely the easiest part of the guide, as it is just creating some folders and dragging files."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open your ",(0,i.jsx)(n.code,{children:"/home"})," folder and create a new folder called ",(0,i.jsx)(n.code,{children:"shadowstore"}),". ",(0,i.jsxs)(n.em,{children:["(You may call it anything you like, just keep in mind the guide will refer to it as ",(0,i.jsx)(n.code,{children:"shadowstore"}),".)"]})]}),"\n",(0,i.jsxs)(n.li,{children:["Using WinSCP, copy and paste the contents of the zip you downloaded from our website into ",(0,i.jsx)(n.code,{children:"/home/shadowstore"}),".\r\n",(0,i.jsx)(n.img,{alt:"shadowstore-WinSCP",src:t(5170).A+"",width:"403",height:"319"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"nginx-configuration",children:"Nginx Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Using WinSCP please head to ",(0,i.jsx)(n.code,{children:"/etc/nginx/sites-available/default"})," as it is the default Nginx site configuration file.",(0,i.jsx)(n.br,{}),"\nDelete all the default contents from the file, if you haven't made any changes to it before."]}),"\n",(0,i.jsxs)(n.p,{children:["Replace the contents with the below and ensure you set the correct ",(0,i.jsx)(n.code,{children:"port"})," and ",(0,i.jsx)(n.code,{children:"domain"})," based on your needs."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"server {\r\n\r\n  server_name example.com; # Change domain to your domain\r\n\r\n  location / {\r\n    proxy_pass http://localhost:3000; # Change the port if needed.\r\n    proxy_http_version 1.1;\r\n    proxy_set_header Upgrade $http_upgrade;\r\n    proxy_set_header Connection 'upgrade';\r\n    proxy_set_header Host $host;\r\n    proxy_cache_bypass $http_upgrade;\r\n    proxy_set_header X-Real-IP $remote_addr;\r\n  }\r\n    error_page 502 =500 /502.html;\r\n    location = /502.html {\r\n        root  /home/shadowstore/static;\r\n    }\r\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Now, head to ",(0,i.jsx)(n.code,{children:"/etc/nginx/"})," and open the ",(0,i.jsx)(n.code,{children:"ngnix.conf"})," file, then you will add ",(0,i.jsx)(n.code,{children:"client_max_body_size 10G;"})," inside your ",(0,i.jsx)(n.code,{children:"http"})," section.",(0,i.jsx)(n.br,{}),"\nYour ",(0,i.jsx)(n.code,{children:"http"})," section, if you've not made any other edits, will look like this:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.em,{children:"Note: The 10G stands for 10 gigabytes, and you may modify this if you need to upload bigger files! Looking up the nginx documentation can be helpful."})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"http {\r\n\r\n\t##\r\n\t# Basic Settings\r\n\t##\r\n\r\n\tsendfile on;\r\n\ttcp_nopush on;\r\n\ttypes_hash_max_size 2048;\r\n\t# server_tokens off;\r\n\r\n\t# server_names_hash_bucket_size 64;\r\n\t# server_name_in_redirect off;\r\n\r\n\tinclude /etc/nginx/mime.types;\r\n\tdefault_type application/octet-stream;\r\n\r\n\t##\r\n\t# SSL Settings\r\n\t##\r\n\r\n\tssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\r\n\tssl_prefer_server_ciphers on;\r\n\r\n\t##\r\n\t# Logging Settings\r\n\t##\r\n\r\n\taccess_log /var/log/nginx/access.log;\r\n\r\n\t##\r\n\t# Gzip Settings\r\n\t##\r\n\r\n\tgzip on;\r\n\r\n\t# gzip_vary on;\r\n\t# gzip_proxied any;\r\n\t# gzip_comp_level 6;\r\n\t# gzip_buffers 16 8k;\r\n\t# gzip_http_version 1.1;\r\n\t# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\r\n\r\n\t##\r\n\t# Virtual Host Configs\r\n\t##\r\n\r\n\tinclude /etc/nginx/conf.d/*.conf;\r\n\tinclude /etc/nginx/sites-enabled/*;\r\n\r\n\tclient_max_body_size 10G;\r\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"Once you've set everything correctly, save the file, and then restart Nginx:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart nginx\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You can check the status with ",(0,i.jsx)(n.code,{children:"sudo systemctl status nginx"})," if you want!"]}),"\n",(0,i.jsx)(n.h3,{id:"issue-ssl-certificate",children:"Issue SSL Certificate"}),"\n",(0,i.jsxs)(n.p,{children:["We will be using Certbot to issue a SSL certificate, so we want to run the following command but make sure to replace ",(0,i.jsx)(n.code,{children:"example.com"})," with your domain."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo certbot --nginx -d example.com\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You will get asked for some details, like your email (but it isn't shown to the public).",(0,i.jsx)(n.br,{}),"\nWhen asked about a redirect method, select option ",(0,i.jsx)(n.code,{children:"2"}),".",(0,i.jsx)(n.br,{}),"\nNow that you have issued a certificate, we will want to make sure it self renews:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo certbot renew --dry-run\n"})}),"\n",(0,i.jsx)(n.h2,{id:"database",children:"Database"}),"\n",(0,i.jsxs)(n.p,{children:["This is 100% the easiest part of the install process, since you have to do NOTHING! Within the ",(0,i.jsx)(n.code,{children:"server.js"})," file, we have written code to automatically populate the database. This means, as long as you have MongoDB running properly then once you configure Shadow Store, the database will get automatically populate with the base data, and if you ever break the database the script will automatically fix any major errors."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},5170(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/shadowstore-WinSCP-9a0fa2d4a33f388a4402509e9f081f59.png"},8453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);